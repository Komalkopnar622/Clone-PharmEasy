<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Card</title>
    
    <!-- Navbar CSS linked to cart page -->
    <link rel="stylesheet" href="../Navbar/navbar.css">
    <link rel="stylesheet" href="cart.css">
    <style>
        /* #container{
        display: grid;
        width: 90%;
       
        margin: auto;
        grid-template-columns: repeat(3,1fr);
        gap:20px;

    }
    #container>div{
       width: 400px;
       border: 1px solid gray;
       border-radius: 5px;
    }
    #container img{
       width:100%;
       height: 300px;
    } 
    p,h3{
        display: flex;
        justify-content: center;
        justify-items: center;;
    }
   
   
    
    button{
        display: block;
        margin: auto;
        padding: 5px 10px;
        background-color: teal;
        color: white;
        font-weight: bold;
        border: 0px;
        border-radius: 5px;
        margin-bottom: 10px;
    }
    #box1{
        display: flex;
        justify-content: space-evenly;
    }
    #pr,#ct{
        display: flex;
    } */
    /* #count{
        display: flex;
        /* //justify-content: left; */
    
    </style>
</head>
<body>
    <!-- Navbar added -->
    <div id="navbar">
        <div id="row1">
            <!-- Logo -->
            <img class="logo" src="https://assets.pharmeasy.in/web-assets/dist/fca22bc9.png" >

            <!-- PinCode and Search Bar -->
            <div id="searchBar">

                <select name="pincode" id="pincode">
                    <option value="">Select Pincode</option>
                    <option value="440013">Mumbai</option>
                    <option value="445682">Bangalore</option>
                    <option value="489789">Delhi</option>
                </select>
                <input type="text" placeholder="Search medicines/Healthcare products @18% Off">
                
               <button class="searchbtn">Search</button> 
            </div>
        </div>

        <!-- login singup navbar -->
        <div id="row2">
            <div>
                <a href="">Order Medicines</a>
                <!-- healthcare product linked -->
                <a href="../products/helthcare_product.html">Healthcare Products</a>
                <a href="">Lab Tests</a>
                <a href="">RTPCR</a>
            </div>
            <div>
                <p>
                    <img src="https://assets.pharmeasy.in/web-assets/dist/275c07e1.svg" >
                   <a>Offers</a></p>
                <p>
                    <img src="https://assets.pharmeasy.in/web-assets/dist/5eb42971.svg" >
                <a> Login /Singup</a></p>
                <p>
                    <img src="https://assets.pharmeasy.in/web-assets/dist/21b0b5ba.svg" >
                <a> Cart</a>
                 </p>

            </div>

            
        </div>
    </div>

    <!-- cart part start from here -->
    <div id="parent">
        <div class="box">
          <!-- Added Cart Items -->
                <h2 id="count"></h1>
                <h2>Item in Cart</h2>
                <div id="addedItems">
                    <!-- items will be append here -->
                </div>
        </div>

        <div class="box">
                <!-- coupon, delivery address and order summary -->
        </div>
    </div>
   
        <!-- <div id="pr">
            <h2>Amount to be paid:</h2>
            <h2 id="price"></h1>
        </div> -->
    
    
    
</body>
</html>
<script>
var cardArr=JSON.parse(localStorage.getItem("productcard"))||[];
var count=JSON.parse(localStorage.getItem("countervalue"))||0;
var price1=JSON.parse(localStorage.getItem("priceCard"))||0
console.log(price1);
document.querySelector("#price").innerText=price1
document.querySelector("#count").innerText=count;

console.log(cardArr)
displayData(cardArr);
function displayData(data){
    console.log(data)
    data.forEach(function(ele,index){
        var box=document.createElement("div");

        var imgbox=document.createElement("div")
        imgbox.setAttribute("class","imgdiv")

        var cardimage=document.createElement("img");
       cardimage.setAttribute("src",ele.image_url)

       imgbox.append(cardimage)

       var infobox=document.createElement("div")
       infobox.setAttribute("class","infodiv")

        var productname=document.createElement("h3");
        productname.innerText=ele.name;

        var productprice=document.createElement("p");
        productprice.innerText=ele.price;

        var deletebutton=document.createElement("button");
        deletebutton.innerText="DELETE";
        //deletebutton.setAttribute("id",del)
        deletebutton.addEventListener("click",function(){
            deleteFuction(ele,index,ele.price)
        })

        infobox.append(productname,productprice,deletebutton)

        box.append(imgbox,infobox);

        document.querySelector("#addedItems").append(box);
    })
    //localStorage.setItem("addcards",JSON.stringify(cardArr));
   
  function deleteFuction(ele,index,p){
    //event.target.parentNode.remove();
    console.log("I am deteted")
    cardArr.splice(index,1)
    count--;
    var price=price1-p;
    localStorage.setItem("priceCard",JSON.stringify(price))
    localStorage.setItem("productcard",JSON.stringify(cardArr));
    localStorage.setItem("countervalue",JSON.stringify(count))
    window.location.reload();
    //window.localStorage.reload();
  }
}
</script>